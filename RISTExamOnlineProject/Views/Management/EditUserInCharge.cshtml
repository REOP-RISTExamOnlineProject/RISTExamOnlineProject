@model RISTExamOnlineProject.Models.db.vewDivisionMaster
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "EditUserInCharge";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Edit User InCharge</h1>

<h4>OperatorReqChange</h4>
<hr />

<div class="row mt-3">
    <div class="col-sm-8">
        <form action="">
            <div class="mt-1 mb-3 p-3 button-container bg-white border shadow-sm">
                <h5 class="mb-0">
                    <strong>Section Change</strong>
                </h5>
                <hr />

                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="Division" class="mb-0">Current-Division</label>
                        @Html.DropDownList("Division", (IEnumerable<SelectListItem>)ViewBag.CategoryDivision, new { @class = "form-control border-success" })
                    </div>
                    <div class="col-sm-6">
                        <label asp-for="DivisionName" class="mb-0 text-danger">New-Division</label>
                        <select asp-for="row_num" class="form-control"
                                asp-items="@(new SelectList(@ViewBag.listofCatagoryDiv, "row_num", "DivisionName"))"></select>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="Department" class="mb-0">Current-Department</label>
                        @Html.DropDownList("Department", (IEnumerable<SelectListItem>)ViewBag.CategoryDepartment, new { @class = "form-control border-success" })
                    </div>

                    <div class="col-sm-6">
                        <label for="row_dept_id" class="mb-0 text-danger">New-Department</label>
                        <select class="form-control" id="row_dept_id" name="row_dept_id" asp-for="row_dept_id"
                                asp-items="@(new SelectList(string.Empty,"row_dept_id", "Department"))"></select>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="Section" class="mb-0">Current-Section</label>
                        @Html.DropDownList("Section", (IEnumerable<SelectListItem>)ViewBag.CategorySection, new { @class = "form-control border-success" })
                    </div>
                    <div class="col-sm-6">
                        <label for="SectionCodeID" class="mb-0 text-danger">New-Section</label>
                        <select class="form-control" id="SectionCodeID" name="SectionCodeID" asp-for="SectionCodeID"
                                asp-items="@(new SelectList(string.Empty,"SectionCodeID", "Section"))"></select>
                    </div>
                </div>





            </div>
            <div class="mt-1 mb-3 p-3 button-container bg-white border shadow-sm">
                <h5 class="mb-0">
                    <strong>Shift Change</strong>
                </h5>
                <hr />

                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="Shift" class="mb-0">Current-Shift</label>
                        @Html.DropDownList("Shift", (IEnumerable<SelectListItem>)ViewBag.CategoryShift, new { @class = "form-control border-success" })
                    </div>
                    <div class="col-sm-6">
                        <label for="shiftmaster" class="mb-0 text-danger">New-Shift</label>
                        @Html.DropDownList("Shift", (IEnumerable<SelectListItem>)ViewBag.CategoryShiftmaster, "Select",new { @class = "form-control" })
                    </div>
                </div>




               

            </div>
            <div class="mt-1 mb-3 p-3 button-container bg-white border shadow-sm">
               
                <div class="form-group">
                    <input type="submit" value="Save" class="btn btn-primary" />
                </div>

            </div>
        </form>
    </div>
</div>


@{
    var opno = @User.Identity.Name;

    //var positionlist = ViewBag.Positionlist;

}

<div>
    @*<a asp-controller="Management" asp-action="UserInCharge" asp-route-id=op > ProductName</a>*@
    <a href="@Url.Action("UserInCharge", "Management", new {opno = $"{opno}"})" class=""><i class="fa fa-angle-right mr-2"></i><i class="fa fa-font-awesome"></i> Back to List</a>
    @* <a asp-action="UserInCharge" id="">Back to List</a>*@
</div>


@section scripts{
@*<script src="~/lib/jquery/jquery.js"></script>*@
    <script type="text/javascript">
        $(document).ready(function () {
            var items = "<option value='0'>Select</option>";
           
            $('#row_dept_id').html(items);
            $('#SectionCodeID').html(items);
        });
    </script>
    
    <script type="text/javascript">
        $(document).ready(function () {
            $('#row_num').change(function () {
                var url = '@Url.Content("~/")' + "Management/GetDepartmentCategory";
                var ddlsource = "#row_num";
                $.getJSON(url, { row_num: $(ddlsource).val() }, function (data) {
                    var items = '';
                    $("#row_dept_id").empty();
                    $.each(data, function (i, subcategory) {
                        items += "<option value='" + subcategory.value + "'>" + subcategory.text + "</option>";
                    });
                    $('#row_dept_id').html(items);
                });
            });

            $('#row_dept_id').change(function () {
                var url = '@Url.Content("~/")' + "Management/GetSectionCategory";
                var ddlsource = "#row_dept_id";
                $.getJSON(url, { row_dept_id: $(ddlsource).val() }, function (data) {
                    var items = '';
                    $('#SectionCodeID').empty();
                    $.each(data, function (i, section) {
                        items += "<option value='" + section.value + "'>" + section.text + "</option>";
                    });
                    $('#SectionCodeID').html(items);
                });
            });
        });
    </script>
}

