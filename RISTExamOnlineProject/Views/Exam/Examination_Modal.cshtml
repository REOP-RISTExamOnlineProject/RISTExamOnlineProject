
@{
    ViewData["Title"] = "Examination_Modal";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<html>

<head>
    <style>
        h6 {
            counter-reset: subsection;
        }

            h6::before {
                counter-increment: section;
                content: " " counter(section) ". ";
            }
    </style>

</head>

<body>
    <div class="container-fluid" id="form_main">





        @*<div class="row justify-content-center rounded bg-white m-2" id="Main_Form">*@
        <div class="container rounded bg-white m-2" id="Main_Form">

            <div id="Exam_Form">

                <div class="card">
                    <div class="card-body">

                        <div class="row justify-content-center" id="Question_Form">

                            <div class="col-10">

                                <div class="card rounded border-dark m-4">

                                    <div class="card-header badge-dark">
                                        <h3>
                                            Question
                                        </h3>
                                    </div>
                                    <div class="card-body">

                                        <div class="row justify-content-center  m-3">

                                            <div class="col-11 border border-dark  rounded">

                                                <div class="Display_Question" id="Display_Question" style="min-height:70px; max-height:250px; overflow:auto;">

                                                </div>

                                            </div>

                                            <div class="col-1">
                                                <div class="row p-1">

                                                    <button class="btn btn-dark" id="BTN_Clear_Question" data-toggle="tooltip" data-placement="right" title="ลบทั้งหมด" onclick="Clear_Display('Display_Question')">
                                                        <i class="fas fa-eraser"></i>
                                                    </button>

                                                </div>
                                                <div class="row p-1">
                                                    <button class="btn btn-dark " data-toggle="tooltip" data-placement="right" title="เครื่องมือ" onclick="Show_Summernote('Display_Question')">
                                                        <i class="fas fa-paint-brush"></i>
                                                    </button>

                                                </div>

                                         
                                            </div>

                                        </div>

                                        <hr class="bg-dark mt-4"  />

                                        <div class="row justify-content-lg-start">

                                            <div class="col-2 text-right">
                                                NEED : 

                                            </div>

                                                <div class="col-1 text-left">


                                                    <input type="checkbox" checked data-toggle="toggle" data-onstyle="success" data-offstyle="dark" id="RD_Need" data-size="sm">

                                                </div>

                                            </div>

                                        </div>
                                </div>
                            </div>

                        </div> @*---- end form Que----------*@


                        <div class="row justify-content-center" id="Answer_Form">


                            <div class="col-10">

                                <div class="card border border-dark  rounded m-4">
                                    <div class="card-header badge-dark ">
                                        <h3>
                                            Answer
                                        </h3>

                                    </div>
                                    <div class="card-body">

                                        <div class="card border-0">

                               
                                            <div class="card-body" id="FormDisplay_Answer">



                                                <div class="ANS" id="Ans1">

                                                    <div class="form-group row justify-content-center">
                                                        <div class="col-1">
                                                            <div class="RD_Display">
                                                                <input type="radio" name="optradio"  id="RD_Ans_1" />
                                                            </div>
                                                
                                                        </div>
                                                        <div class="col-10 border border-dark  rounded m-3 p-3">

                                                            <div class="Display_Answer" id="Display_Answer_1" style="min-height:30px; max-height:150px; overflow:auto;">

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="form-group row justify-content-end">
                                                        <div class="col-3">
                                                            <button class="btn btn-dark" data-toggle="tooltip" data-placement="right" title="Clear" onclick="Clear_Display('Display_Answer_1')">
                                                                <i class="fas fa-eraser"></i>
                                                            </button>


                                                            <button class="btn btn-dark " data-toggle="tooltip" data-placement="right" title="Tool" onclick="Show_Summernote('Display_Answer_1')">
                                                                <i class="fas fa-paint-brush"></i>
                                                            </button>

                                                            <button class="remove btn btn-dark" data-toggle="tooltip" data-placement="right" title="Delete">
                                                                <i class="fas fa-trash"></i>
                                                            </button>


                                                        </div>

                                                    </div>
                                                </div>

                                                <label id="LB_Ans_Count"></label>

                                            </div>

                                            <hr class="bg-dark m-auto" style="width:95%;" />

                                            <div class="row justify-content-end m-3">
                                                <div class="col-2 text-right">
                                                    <button class="btn btn-dark " id="BTN_Add_New_Ans" data-toggle="tooltip" data-placement="right" title="เพิ่มคำตอบ" onclick="Add_Ans()">
                                                        <i class="fas fa-plus"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>

                        </div>


                    </div>
                    <div class="card-footer">



                        <button class="btn btn-success " id="BTN_Save" onclick="Save_Ans()">
                            <i class="fas fa-save"></i> Save
                        </button>



                    </div>

                </div>



            </div> @*---- end form ----------*@

            <br />








        </div>

    </div>


    <div class="modal fade" id="Modal_Summernote">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Modal Heading</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">



                    <div id="Display_Modal" class="border border-dark rounded m-3 p-3" style="min-height:30px; max-height:150px; overflow:auto;">

                    </div>
                    <textarea class="form-control " id="Summernote_modal" name="" style="height:150px; overflow:auto;"></textarea>
                    <br />

                    <div class="row justify-content-end m-3">
                        <div class="col-2">
                            <button class="btn btn-info w-100" id="BTN_Add" onclick="Add_Detail_Display('Display_Modal','Summernote_modal')">
                                <i class="fas fa-plus"></i>     Add
                            </button>

                        </div>
                        <div class="col-2">
                            <button class="btn btn-info w-100" id="BTN_Edit" onclick="Edit_Detail_Display('Display_Modal','Summernote_modal')">
                                <i class="fas fa-edit"></i> Edit
                            </button>

                        </div>

                        <div class="col-2">
                            <button class="btn btn-danger w-100" id="BTN_Reset" onclick="Reset_Summernote('Summernote_modal')">
                                <i class="fas fa-trash-alt"></i> Reset
                            </button>

                        </div>
                    </div>

                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button class="btn btn-success " id="BTN_Save" onclick="Save()">
                        <i class="fas fa-save"></i> Save
                    </button>
                    <button type="button" class="btn btn-secondary " data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>






    @section Scripts
{


        <script src="~/lib/summernote/dist/Bootstrap_4_4_1.js"></script>
        <script src="~/lib/jquery/jquery.min.js"></script>
        <script src="~/lib/bootstrap/js/bootstrap.min.js"></script>
        <link href="~/lib/summernote/dist/summernote-bs4.min.css" rel="stylesheet" />
        <script src="~/lib/summernote/dist/summernote-bs4.min.js"></script>
        <script src="~/lib/CustomJS/Exam/CommonJS.js"></script>
        <script src="~/lib/CustomJS/Exam/Create_Exam.js"></script>
        <link href="~/lib/bootstrap/css/bootstrap4-toggle.css" rel="stylesheet" />
        <script src="~/lib/bootstrap/js/bootstrap4-toggle.js"></script>

        <script>
            var Exam_NO = 0
            var TempDisplayID;
            var TempHTML;
            var AnsrowCount = 1
            var aa = "";
            var Ans_Array;
            var result = { NO: "", Value: [] };  //[0]type,[1]HTMLText,[2]Ans_Value,[3]Need
            var Need_Value
            $(document).ready(function () {
                $('#RD_Need').bootstrapToggle('off')
                CountAns()
            });



            function Exam_Key() {


            }


            $(document).on('click', 'button.remove', function (e) {
                debugger
                var parent = document.getElementById("FormDisplay_Answer");
                var nodesSameClass = 0
                nodesSameClass = parent.getElementsByClassName("ANS");

                if (nodesSameClass.length > 1) {

                    e.preventDefault();

                    $(this).closest('div.ANS').remove();
                }


                CountAns()

            });


            function CountAns() {
            
                var parent = document.getElementById("FormDisplay_Answer");
                var eee = 0
                eee = parent.getElementsByClassName("ANS");
                var count = eee.length

                $('#LB_Ans_Count').text('Count:'+ count);
                
            }



            function Save() {
                var HTMLText = document.getElementById('Display_Modal').innerHTML
                DeleteHTML(TempDisplayID)
                InputHTML(TempDisplayID, HTMLText)
                $('#Modal_Summernote').modal('hide')
            }



            function Save_Ans() {

                var NO;
                var Type;
                var TextDisplay;
                var Ans_Value;
                var Need_vlue

                
        
                debugger
                var parent = document.getElementById("FormDisplay_Answer");

                var nodesSameClass = 0
                  nodesSameClass = parent.getElementsByClassName("ANS");

                var AnsCount = nodesSameClass.length

                var Display = document.getElementsByClassName("Display_Answer");
                var RD = document.getElementsByClassName("RD_Display");
              //  var val = getRadioVal(this, 'ship');


                for (var i = 0; i <= AnsCount - 1; i++) {

                    TextDisplay = Display[i].innerHTML;
                    Ans_Value = Number(RD[i].childNodes[1].checked)
                    var count_TB = table.length
                    if (count_TB != 0) {

                        count_TB = count_TB+1
                    }


                }
             


          





                
               

            }



        </script>

    }








</body>

</html>

